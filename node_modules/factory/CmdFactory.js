var control = require('control');
var adminCtrl = control.adminCtrl;

var config = require('config');
var prop = config.prop;
var ec = config.ec;

var esut = require('easy_util');
var log = esut.log;

var CmdFactory = function(){};

CmdFactory.prototype.handle = function(headNode, bodyStr, cb)
{
    var cmdGroup = headNode.cmd.match(/^([A-Z]+)([0-9]{1,})$/);
    if(cmdGroup[1] == "AD")
    {
        adminCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'A')
    {
        control.userCtrl.handle(headNode, bodyStr, cb);
    }
    else
    {
        cb(ec.E9000);
    }
}

var cmdFactory = new CmdFactory();
module.exports = cmdFactory;